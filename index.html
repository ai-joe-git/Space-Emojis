<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jetpack Emoji Adventure</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            touch-action: none;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 1px solid #000;
            max-width: 100%;
            max-height: 100%;
        }
        #startMenu, #gameOverMenu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background-color: rgba(255, 255, 255, 0.8);
            padding: 20px;
            border-radius: 10px;
        }
        button {
            font-size: 18px;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <div id="startMenu">
        <h1>Jetpack Emoji Adventure</h1>
        <button id="startButton">Start Game</button>
    </div>
    <div id="gameOverMenu" style="display: none;">
        <h1>Game Over</h1>
        <p>Your Score: <span id="finalScore"></span></p>
        <button id="restartButton">Play Again</button>
        <button id="shareButton">Share Score</button>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const startMenu = document.getElementById('startMenu');
        const gameOverMenu = document.getElementById('gameOverMenu');
        const startButton = document.getElementById('startButton');
        const restartButton = document.getElementById('restartButton');
        const shareButton = document.getElementById('shareButton');
        const finalScoreElement = document.getElementById('finalScore');

        // Set canvas size based on window size
        function resizeCanvas() {
            canvas.width = window.innerWidth * 0.95;
            canvas.height = window.innerHeight * 0.95;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game variables
        let player, enemies, powerUps, projectiles, backgroundOffset, score, level, gameActive;

        function initGame() {
            player = {
                x: 50,
                y: canvas.height / 2,
                size: 40,
                speed: 5,
                fuel: 100,
                powerUp: null,
                powerUpTime: 0
            };
            enemies = [];
            powerUps = [];
            projectiles = [];
            backgroundOffset = 0;
            score = 0;
            level = 1;
            gameActive = true;
        }

        const enemyTypes = ['👾', '👹', '👻', '🤖', '🦹'];
        const powerUpTypes = {
            'laser': '🔫',
            'fireball': '🔥',
            'snowball': '❄️'
        };
        const decorations = ['🌟', '🌙', '🌠', '🪐', '🌈'];

        const levelColors = [
            ['#87CEEB', '#E0F6FF'],  // Level 1: Light blue
            ['#FFA500', '#FFD700'],  // Level 2: Orange
            ['#9932CC', '#DA70D6'],  // Level 3: Purple
            ['#228B22', '#32CD32'],  // Level 4: Green
            ['#8B4513', '#D2691E']   // Level 5: Brown
        ];

        // Game loop
        function gameLoop() {
            if (!gameActive) return;
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            // Player movement
            if (isJetpackActive && player.fuel > 0) {
                player.y -= player.speed;
                player.fuel -= 0.5;
            } else if (player.y < canvas.height - player.size) {
                player.y += player.speed / 2;
            }

            // Refuel when not using jetpack
            if (!isJetpackActive && player.fuel < 100) {
                player.fuel += 0.2;
            }

            // Update enemies
            if (Math.random() < 0.02 + (level * 0.005)) {
                spawnEnemy();
            }
            enemies.forEach((enemy, index) => {
                enemy.x -= enemy.speed;
                if (enemy.x + enemy.size < 0) {
                    enemies.splice(index, 1);
                }
                if (collision(player, enemy)) {
                    gameOver();
                }
            });

            // Update power-ups
            if (Math.random() < 0.005) {
                spawnPowerUp();
            }
            powerUps.forEach((powerUp, index) => {
                powerUp.x -= 2;
                if (powerUp.x + powerUp.size < 0) {
                    powerUps.splice(index, 1);
                }
                if (collision(player, powerUp)) {
                    player.powerUp = powerUp.type;
                    player.powerUpTime = 300;
                    powerUps.splice(index, 1);
                }
            });

            // Update projectiles
            if (player.powerUp && player.powerUpTime > 0) {
                if (Math.random() < 0.1) {
                    fireProjectile();
                }
                player.powerUpTime--;
            } else {
                player.powerUp = null;
            }

            projectiles.forEach((projectile, index) => {
                projectile.x += projectile.speed;
                if (projectile.x > canvas.width) {
                    projectiles.splice(index, 1);
                }
                enemies.forEach((enemy, enemyIndex) => {
                    if (collision(projectile, enemy)) {
                        enemies.splice(enemyIndex, 1);
                        projectiles.splice(index, 1);
                        score += 10;
                        if (score % 100 === 0) {
                            levelUp();
                        }
                    }
                });
            });

            // Animate background
            backgroundOffset += 0.5;
            if (backgroundOffset >= canvas.width) {
                backgroundOffset = 0;
            }
        }

        function draw() {
            // Draw animated background
            let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, levelColors[level - 1][0]);
            gradient.addColorStop(1, levelColors[level - 1][1]);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw decorations
            ctx.font = "30px Arial";
            for (let i = 0; i < 10; i++) {
                ctx.fillText(decorations[Math.floor(Math.random() * decorations.length)], 
                    Math.random() * canvas.width, 
                    Math.random() * canvas.height);
            }

            // Draw cloud emojis
            for (let i = 0; i < 8; i++) {
                ctx.fillText("☁️", (i * 150 + backgroundOffset) % canvas.width, 50 + Math.sin(i) * 30);
            }

            // Draw player
            ctx.font = `${player.size}px Arial`;
            ctx.fillText("🚀", player.x, player.y);

            // Draw jetpack flame
            if (isJetpackActive && player.fuel > 0) {
                ctx.font = `${player.size / 2}px Arial`;
                ctx.fillText("🔥", player.x - 10, player.y + player.size / 2);
            }

            // Draw enemies
            enemies.forEach(enemy => {
                ctx.font = `${enemy.size}px Arial`;
                ctx.fillText(enemy.emoji, enemy.x, enemy.y);
            });

            // Draw power-ups
            powerUps.forEach(powerUp => {
                ctx.font = `${powerUp.size}px Arial`;
                ctx.fillText(powerUpTypes[powerUp.type], powerUp.x, powerUp.y);
            });

            // Draw projectiles
            projectiles.forEach(projectile => {
                ctx.font = `${projectile.size}px Arial`;
                ctx.fillText(powerUpTypes[projectile.type], projectile.x, projectile.y);
            });

            // Draw fuel bar
            ctx.fillStyle = "#00FF00";
            ctx.fillRect(10, 10, player.fuel * 2, 20);
            ctx.strokeStyle = "#000000";
            ctx.strokeRect(10, 10, 200, 20);

            // Draw power-up indicator and time
            if (player.powerUp) {
                ctx.fillStyle = "#000000";
                ctx.font = "20px Arial";
                ctx.fillText(`Power-up: ${powerUpTypes[player.powerUp]}`, 10, 60);
                ctx.fillRect(10, 70, player.powerUpTime * 2/3, 10);
                ctx.strokeRect(10, 70, 200, 10);
            }

            // Draw score and level
            ctx.fillStyle = "#000000";
            ctx.font = "24px Arial";
            ctx.fillText(`Score: ${score}`, canvas.width - 150, 30);
            ctx.fillText(`Level: ${level}`, canvas.width - 150, 60);
        }

        function spawnEnemy() {
            enemies.push({
                x: canvas.width,
                y: Math.random() * (canvas.height - 50),
                size: 40,
                speed: 2 + Math.random() * 3 + (level * 0.5),
                emoji: enemyTypes[Math.floor(Math.random() * enemyTypes.length)]
            });
        }

        function spawnPowerUp() {
            const types = Object.keys(powerUpTypes);
            powerUps.push({
                x: canvas.width,
                y: Math.random() * (canvas.height - 40),
                size: 40,
                type: types[Math.floor(Math.random() * types.length)]
            });
        }

        function fireProjectile() {
            projectiles.push({
                x: player.x + player.size,
                y: player.y + player.size / 2,
                size: 20,
                speed: 10,
                type: player.powerUp
            });
        }

        function collision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.size &&
                   obj1.x + obj1.size > obj2.x &&
                   obj1.y < obj2.y + obj2.size &&
                   obj1.y + obj1.size > obj2.y;
        }

        function levelUp() {
            level = Math.min(level + 1, 5);
            player.speed += 0.5;
        }

        function gameOver() {
            gameActive = false;
            finalScoreElement.textContent = score;
            gameOverMenu.style.display = 'block';
        }

        // Touch input
        let isJetpackActive = false;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isJetpackActive = true;
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            isJetpackActive = false;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
        });

        // Start menu
        startButton.addEventListener('click', () => {
            startMenu.style.display = 'none';
            initGame();
            gameLoop();
        });

        // Game over menu
        restartButton.addEventListener('click', () => {
            gameOverMenu.style.display = 'none';
            initGame();
            gameLoop();
        });

        shareButton.addEventListener('click', () => {
            const text = `I scored ${score} points in Jetpack Emoji Adventure! Can you beat my score?`;
            const url = encodeURIComponent(window.location.href);
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${url}`);
        });
    </script>
</body>
</html>
