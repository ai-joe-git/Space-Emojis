<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jetpack Emoji Adventure</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            touch-action: none;
        }
        canvas {
            border: 1px solid #000;
            max-width: 100%;
            max-height: 100%;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas size based on window size
        function resizeCanvas() {
            canvas.width = window.innerWidth * 0.95;
            canvas.height = window.innerHeight * 0.95;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Game variables
        let player = {
            x: 50,
            y: canvas.height / 2,
            size: 40,
            speed: 5,
            fuel: 100,
            powerUp: null
        };

        let enemies = [];
        let powerUps = [];
        let projectiles = [];
        let backgroundOffset = 0;

        const enemyTypes = ['👾', '👹', '👻', '🤖', '🦹'];
        const powerUpTypes = {
            'laser': '🔫',
            'fireball': '🔥',
            'snowball': '❄️'
        };

        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            // Player movement
            if (isJetpackActive && player.fuel > 0) {
                player.y -= player.speed;
                player.fuel -= 0.5;
            } else if (player.y < canvas.height - player.size) {
                player.y += player.speed / 2;
            }

            // Refuel when not using jetpack
            if (!isJetpackActive && player.fuel < 100) {
                player.fuel += 0.2;
            }

            // Update enemies
            if (Math.random() < 0.02) {
                spawnEnemy();
            }
            enemies.forEach((enemy, index) => {
                enemy.x -= enemy.speed;
                if (enemy.x + enemy.size < 0) {
                    enemies.splice(index, 1);
                }
            });

            // Update power-ups
            if (Math.random() < 0.005) {
                spawnPowerUp();
            }
            powerUps.forEach((powerUp, index) => {
                powerUp.x -= 2;
                if (powerUp.x + powerUp.size < 0) {
                    powerUps.splice(index, 1);
                }
                if (collision(player, powerUp)) {
                    player.powerUp = powerUp.type;
                    powerUps.splice(index, 1);
                }
            });

            // Update projectiles
            if (player.powerUp && Math.random() < 0.1) {
                fireProjectile();
            }
            projectiles.forEach((projectile, index) => {
                projectile.x += projectile.speed;
                if (projectile.x > canvas.width) {
                    projectiles.splice(index, 1);
                }
                enemies.forEach((enemy, enemyIndex) => {
                    if (collision(projectile, enemy)) {
                        enemies.splice(enemyIndex, 1);
                        projectiles.splice(index, 1);
                    }
                });
            });

            // Animate background
            backgroundOffset += 0.5;
            if (backgroundOffset >= canvas.width) {
                backgroundOffset = 0;
            }
        }

        function draw() {
            // Draw animated background
            let gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, "#87CEEB");
            gradient.addColorStop(1, "#E0F6FF");
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Draw cloud emojis
            ctx.font = "30px Arial";
            for (let i = 0; i < 5; i++) {
                ctx.fillText("☁️", (i * 200 + backgroundOffset) % canvas.width, 100);
            }

            // Draw player
            ctx.font = `${player.size}px Arial`;
            ctx.fillText("🚀", player.x, player.y);

            // Draw jetpack flame
            if (isJetpackActive && player.fuel > 0) {
                ctx.font = `${player.size / 2}px Arial`;
                ctx.fillText("🔥", player.x - 10, player.y + player.size / 2);
            }

            // Draw enemies
            enemies.forEach(enemy => {
                ctx.font = `${enemy.size}px Arial`;
                ctx.fillText(enemy.emoji, enemy.x, enemy.y);
            });

            // Draw power-ups
            powerUps.forEach(powerUp => {
                ctx.font = `${powerUp.size}px Arial`;
                ctx.fillText(powerUpTypes[powerUp.type], powerUp.x, powerUp.y);
            });

            // Draw projectiles
            projectiles.forEach(projectile => {
                ctx.font = `${projectile.size}px Arial`;
                ctx.fillText(powerUpTypes[projectile.type], projectile.x, projectile.y);
            });

            // Draw fuel bar
            ctx.fillStyle = "#00FF00";
            ctx.fillRect(10, 10, player.fuel * 2, 20);
            ctx.strokeStyle = "#000000";
            ctx.strokeRect(10, 10, 200, 20);

            // Draw power-up indicator
            if (player.powerUp) {
                ctx.fillStyle = "#000000";
                ctx.font = "20px Arial";
                ctx.fillText(`Power-up: ${powerUpTypes[player.powerUp]}`, 10, 60);
            }
        }

        function spawnEnemy() {
            enemies.push({
                x: canvas.width,
                y: Math.random() * (canvas.height - 50),
                size: 40,
                speed: 2 + Math.random() * 3,
                emoji: enemyTypes[Math.floor(Math.random() * enemyTypes.length)]
            });
        }

        function spawnPowerUp() {
            const types = Object.keys(powerUpTypes);
            powerUps.push({
                x: canvas.width,
                y: Math.random() * (canvas.height - 40),
                size: 40,
                type: types[Math.floor(Math.random() * types.length)]
            });
        }

        function fireProjectile() {
            projectiles.push({
                x: player.x + player.size,
                y: player.y + player.size / 2,
                size: 20,
                speed: 10,
                type: player.powerUp
            });
        }

        function collision(obj1, obj2) {
            return obj1.x < obj2.x + obj2.size &&
                   obj1.x + obj1.size > obj2.x &&
                   obj1.y < obj2.y + obj2.size &&
                   obj1.y + obj1.size > obj2.y;
        }

        // Touch input
        let isJetpackActive = false;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            isJetpackActive = true;
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            isJetpackActive = false;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
        });

        // Start the game
        gameLoop();
    </script>
</body>
</html>
